package com.fileshare.service;

import java.time.LocalDateTime;
import java.util.UUID;

import org.springframework.stereotype.Service;

import com.fileshare.entity.Room;
import com.fileshare.entity.RoomMember;
import com.fileshare.store.InMemoryStore;

@Service
public class RoomService {

	private final InMemoryStore store;
	
	public RoomService(InMemoryStore store) {
		
		this.store = store;
	}
	
	public Room createRoom(String owner) {
		
		String roomKey = UUID.randomUUID().toString().substring(0,6);
		
		Room room = new Room(roomKey, owner, LocalDateTime.now().plusMinutes(60));
		
		room.getMembers().put(owner, new RoomMember(owner, true));
		
		store.rooms.put(roomKey, room);
		
		return room;
	}
	
	
	
}
